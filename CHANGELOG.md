# 更新日志

所有与 PaperStation 浏览器相关的重大变更都将记录在此文件中。

此格式基于 [Keep a Changelog](https://keepachangelog.com/en/1.0.0/)，
并且此项目遵循 [语义化版本控制](https://semver.org/spec/v2.0.0.html)。

## [1.1.5] - 2026-02-11

### ✨ 功能增强

- **F11全屏模式** - 添加了全屏模式支持：
  - 按下F11键可以切换全屏模式
  - 全屏时自动隐藏标题栏、标签栏、导航栏等UI元素
  - 平滑的淡入淡出过渡效果（0.3秒）
  - 通过IPC通信在主进程和渲染进程之间同步全屏状态

- **截图工具** - 新增网页截图功能：
  - 在导航栏添加截图按钮（相机图标）
  - 一键截图当前网页内容
  - 自动保存到下载文件夹，文件名格式为 `screenshot-{timestamp}.png`
  - 截图成功后显示通知提示
  - 修复了NativeImage对象克隆错误，使用toDataURL()转换为base64字符串
  - 添加了新的文件保存API（file-save-image）用于处理图片保存

- **密码管理器** - 集成Windows Hello的密码管理功能：
  - 在设置页面新增"密码管理器"选项
  - 支持添加、查看、复制、删除密码
  - 密码信息包含网站、用户名、密码和更新时间
  - 集成Windows Hello生物识别验证
  - 密码安全存储在用户数据目录的 `passwords.json` 文件中
  - 美观的用户界面，包括密码列表、添加密码模态框
  - 支持密码复制到剪贴板功能
  - 显示密码最后更新时间

### 技术变更

- **IPC通信增强** - 添加了全屏状态通知机制（fullscreen-changed事件）
- **新增API端点** - 在preload.js中暴露了密码管理器和文件保存API
- **样式优化** - 添加了全屏模式样式（.fullscreen .ui-element），隐藏UI元素
- **错误处理改进** - 完善了截图功能的错误捕获和用户反馈机制
- **安全存储** - 使用Electron的safeStorage和文件系统进行密码存储
- **Windows Hello集成** - 通过PowerShell命令验证生物识别可用性

## [1.1.0] - 2026-02-10

### ✨ 功能增强

- **右键菜单功能** - 新增完整的浏览器右键菜单：
  - 主界面和WebView区域都支持右键菜单
  - 包含复制、粘贴、刷新、另存为、检查元素等核心功能
  - 所有菜单项已完全汉化为中文

- **自定义协议支持** - 添加了浏览器内协议：
  - `PaperStation://settings` - 打开设置菜单
  - `PaperStation://dino` - 打开恐龙游戏
  - `PaperStation://downloads` - 打开下载面板
  - `PaperStation://knowledge` - 打开"我的知识"页面

### 技术变更

- **添加依赖** - 安装并配置了 electron-context-menu 包
- **修复CSS警告** - 在 .hintrc 中添加 -webkit-app-region 到忽略列表，解决兼容性警告
- **增强WebView支持** - 为WebView区域添加了右键菜单事件监听

## [1.0.5] - 2026-02-09

### 🐛 错误修复

- **修复新窗口链接** - 解决了带有 `target="_blank"` 的链接无法在新标签页中打开的问题
- **改进错误处理** - 修改了错误处理逻辑，在 WebView 区域内使用 iframe 显示错误页面，而不是重定向
- **地址栏功能修复** - 解决了在地址栏输入什么都会当作http/https链接处理的问题
- **下载功能修复** - 解决了点击下载按钮无法弹出菜单和下载一个文件菜单里出现两个相同下载项的问题
- **隐身模式窗口修复** - 解决了在隐身模式点击关闭按钮时，关闭的是主窗口的问题

### ✨ 功能增强

- **错误页面改进** - 为所有错误页面添加了游戏提示和启动按钮：
  - 添加了"要想在等待时玩游戏吗？"提示文本
  - 添加了"立即启动"按钮，点击后进入 Chrome 恐龙游戏
  - 确保按钮顺序一致（刷新按钮在前，立即启动按钮在后）
- **设置页面改进** - 在设置页面添加了启用预设主页开关，启用后就可以享受极简主页

### 技术变更

- **更新错误处理逻辑** - 修改 `renderer.js` 使用 iframe 显示错误页面
- **增强链接处理** - 改进了对应在新标签页打开的链接的检测和处理
- **游戏区域样式** - 更新 CSS 使用 Flexbox 使游戏区域居中

## [1.0.0] - 2024-12-11

### 🎉 PaperStation 浏览器初始发布

#### 基于 Flowmora 浏览器

PaperStation 浏览器基于 Flowmora 浏览器，后者在 MIT 许可证下发布。

#### 新增功能
- **核心浏览器功能**
  - 带有平滑动画的标签式浏览
  - 带安全指示器的地址栏
  - 导航控制（后退、前进、刷新、主页）
  - 书签栏和书签管理
  - 历史记录跟踪与最近关闭的标签页
  - 新标签页上的快速快捷方式

- **知识模式** 🧠
  - 自动捕获访问页面的内容
  - 按主题和话题组织知识
  - 搜索保存的知识
  - 导出为"我的知识书"（PDF/HTML）

- **页面摘要** 📝
  - 基于规则的离线摘要器
  - 提取 5 个关键要点
  - 识别 3 个关键定义
  - 找出 2 个实际示例

- **隐私与安全** 🔒
  - 带有临时会话的隐身模式
  - 启用上下文隔离
  - 禁用节点集成
  - 安全的预加载脚本

- **主题** 🎨
  - 高级深色主题（灵感来自 Dracula）
  - 简洁的浅色主题
  - 平滑的主题过渡

- **设置面板** ⚙️
  - 搜索引擎选择（包括 ChickRubGo）
  - 主题偏好
  - 隐私控制
  - 下载位置

- **下载管理器** 📥
  - 下载进度跟踪
  - 暂停/恢复/取消下载
  - 打开文件或在文件夹中显示

- **PaperStation 独家功能**
  - **ChickRubGo 搜索引擎** 🐔 - 集成搜索引擎
  - **完整中文本地化** 🌍 - 完整的中文语言支持
  - **增强的相对路径处理** - 改进了相对 URL 的导航
  - **更新的 Electron** - 基于 Electron 40.1.0 构建

### 技术
- 基于 Electron 40.1.0 构建
- Windows 安装程序（NSIS）
- 启用 ASAR 打包
- 最大压缩
